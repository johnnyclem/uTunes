Comprehensive Plan for Robust Album Detection:
1. Directory Structure Analysis
- Detect if folder contains subdirectories (multi-album) vs just files (single album)
- Parse folder names for artist/album patterns (e.g., "Artist - Album")
- Handle mixed structures appropriately
2. Enhanced Classification Logic
- Single Album: Directory with audio files but no subdirectories containing audio
- Multi-Album Collection: Directory with subdirectories containing audio files
- Compilation: Based on metadata + various artists in same folder
3. Smart Path Generation
- For flat folders: Use folder name as album, extract artist from folder name or metadata
- For nested folders: Use parent as artist, subfolder as album
- Maintain existing metadata preservation
4. Key Improvements
- Add analyze_directory_structure() function
- Enhance classify_track() to consider directory context
- Update generate_target_path() for better organization
- Add better heuristics for artist/album extraction from folder names
5. File Processing Strategy
- Process at directory level rather than individual file level
- Group files by their containing directory
- Apply consistent classification within each directory
